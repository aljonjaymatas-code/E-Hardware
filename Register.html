<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Register | Hardware Hub</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- External CSS -->
  <link rel="stylesheet" href="register.css" />
</head>
<body>
  <div class="register-container">
    <div class="register-box">
      <h1>Create an Account</h1>
      <p class="subtext">Join Hardware Hub and start shopping!</p>

      <form id="register-form">
        <label for="fullname">Full Name</label>
        <input type="text" id="fullname" placeholder="Enter your name" required>

        <label for="email">Email Address</label>
        <input type="email" id="email" placeholder="Enter your email" required>

        <label for="password">Password</label>
        <div class="password-container">
          <input type="password" id="password" placeholder="Create a password" required>
          <button type="button" class="show-password" id="toggle-password">
            <i class="fa fa-eye-slash"></i>
          </button>
        </div>

        <!-- Redesigned LUDS8 Password Rule -->
        <div class="password-hint" id="password-hint">
          <!-- <h4>Password must include:</h4> -->
          <ul>
            <li id="len" class="invalid"><i class="fa fa-circle-xmark"></i> At least 8 characters</li>
            <li id="upper" class="invalid"><i class="fa fa-circle-xmark"></i> One uppercase letter</li>
            <li id="digit" class="invalid"><i class="fa fa-circle-xmark"></i> One number</li>
            <li id="symbol" class="invalid"><i class="fa fa-circle-xmark"></i> One special symbol</li>
          </ul>
        </div>

        <label for="confirm-password">Confirm Password</label>
        <input type="password" id="confirm-password" placeholder="Confirm your password" required>

        <button type="submit" class="btn-register">Register</button>

        <p class="account-text">
          Already have an account? <a href="login.html">Login here</a>
        </p>
      </form>

      <a href="index.html" class="back-home">← Back to Home</a>
    </div>
  </div>

  <script>
    // === Show / Hide Password ===
    const togglePassword = document.getElementById('toggle-password');
    const passwordInput = document.getElementById('password');
    const eyeIcon = togglePassword.querySelector('i');

    togglePassword.addEventListener('click', () => {
      const isHidden = passwordInput.type === 'password';
      passwordInput.type = isHidden ? 'text' : 'password';
      eyeIcon.classList.toggle('fa-eye', isHidden);
      eyeIcon.classList.toggle('fa-eye-slash', !isHidden);
    });

    // === LUDS8 Password Validation ===
    const len = document.getElementById('len');
    const upper = document.getElementById('upper');
    const digit = document.getElementById('digit');
    const symbol = document.getElementById('symbol');

    passwordInput.addEventListener('input', () => {
      const val = passwordInput.value;

      function toggleValidity(el, condition) {
        el.className = condition ? 'valid' : 'invalid';
        const icon = el.querySelector('i');
        icon.className = condition ? 'fa fa-circle-check' : 'fa fa-circle-xmark';
      }

      toggleValidity(len, val.length >= 8);
      toggleValidity(upper, /[A-Z]/.test(val));
      toggleValidity(digit, /\d/.test(val));
      toggleValidity(symbol, /[!@#$%^&*(),.?":{}|<>]/.test(val));
    });

    // === Register Form Handler ===
    (function(){
      const form = document.getElementById('register-form');
      form.addEventListener('submit', function(e){
        e.preventDefault();

        const fullname = document.getElementById('fullname').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        const confirm = document.getElementById('confirm-password').value;

        if (password !== confirm) {
          alert('❌ Passwords do not match!');
          return;
        }

        const validL = password.length >= 8;
        const validU = /[A-Z]/.test(password);
        const validD = /\d/.test(password);
        const validS = /[!@#$%^&*(),.?":{}|<>]/.test(password);
        if (!(validL && validU && validD && validS)) {
          alert('⚠️ Password must meet all LUDS8 rules!');
          return;
        }

        const firstName = fullname.split(/\s+/)[0] || email.split('@')[0] || 'User';
        const user = { firstName, name: fullname, email };
        localStorage.setItem('ehw_user', JSON.stringify(user));

        alert('✅ Registration successful!');
        window.location.href = 'index.html';
      });
    })();
  </script>
</body>
</html>
